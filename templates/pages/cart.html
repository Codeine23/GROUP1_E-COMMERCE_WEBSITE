{% extends "layouts/base.html" %} {% block content %}
<div class="cart-container">
   <!-- Breadcrumbs -->
   <nav class="breadcrumbs">
      <a
         class="breadcrumb-grey"
         href="{{ url_for('home') }}"
         >Home</a
      >
      / <a class="breadcrumb-active"> Cart </a>
   </nav>

   <div class="cart-grid">
      <!-- Left: Cart Items -->
      {% if not cart_items %}
      <div class="empty-cart">
         <p>Your cart is empty.</p>
      </div>

      {% else %}
      <div class="cart-items">
         <div class="cart-header">
            <div class="header-item">Product</div>
            <div class="header-item">Price</div>
            <div class="header-item">Quantity</div>
            <div class="header-item">Subtotal</div>
         </div>

         {% for item in cart_items %}
         <div class="cart-item">
            <div class="cart-item-info">
               <span class="product-name">{{ item.name}}</span>
            </div>
            <div class="price">${{item.discount_price}}</div>
            <div class="quantity">
               <form
                  action="{{ url_for('update_cart', product_id=item.id) }}"
                  method="POST">
                  <input
                     name="quantity"
                     type="number"
                     value="{{ item.quantity}}"
                     min="1"
                     onchange="this.form.submit()"
                     class="qty-input" />
               </form>
            </div>
            <div class="subtotal">${{item.subtotal}}</div>
         </div>
         {% endfor %}
      </div>

      <!-- Right: Checkout Summary -->
      <div class="cart-summary">
         <h3>Cart Total</h3>
         <div class="summary-row">
            <span>Subtotal</span>
            <span>${{ subtotal }}</span>
         </div>
         <div class="summary-row">
            <span>Shipping</span>
            <span>${{ shipping }}</span>
         </div>
         <div class="summary-row total">
            <span>Total</span>
            <span>${{ total }}</span>
         </div>
         <button
            class="checkout-btn"
            onclick="window.location.href='/checkout'">
            Continue to Checkout
         </button>
      </div>
      {% endif %}
   </div>
</div>
{% endblock %}
